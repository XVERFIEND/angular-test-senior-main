<div class="list-container">
  <div class="list-card">
    <h1 class="main-title">Available Vehicles</h1>

    <div class="controls">
      <input type="text" [formControl]="searchControl" placeholder="Search by make or model" class="input-field" />

      <select [formControl]="sortTypeControl" class="select-field">
        @for (option of vehicleSortOptions; track option.sortType) {
          <option [value]="option.sortType">{{ option.label }}</option>
        }
      </select>

      <select [formControl]="sortDirectionControl" class="select-field">
        @for (option of directionSortOptions; track option.sortType) {
          <option [value]="option.sortType">{{ option.label }}</option>
        }
      </select>
    </div>

    @if (vehicleStore.loading()) {
      <div class="message">
        <p>Loading vehicles...</p>
      </div>
    } @else if (vehicleStore.error()) {
      <div class="error-message">
        <p>Error: {{ vehicleStore.error() }}</p>
      </div>
    } @else {
      <ul class="vehicle-list">
        @for (vehicle of vehicleStore.filteredAndSortedVehicles(); track vehicle.id) {
          <li (click)="navigateToVehicleDetail(vehicle.id)" class="vehicle-list-item">
            <strong>{{ vehicle.make }} {{ vehicle.model }}</strong> ({{ vehicle.year }}) - <span class="price">Â£{{ vehicle.price | number:'1.2-2' }}</span>
          </li>
        } @empty {
          <li class="message">No vehicles found matching your criteria.</li>
        }
      </ul>

      <p class="count-message">Displaying {{ vehicleStore.filteredAndSortedVehicles().length }} of {{ vehicleStore.totalVehicles() }} vehicles.</p>
    }
  </div>
</div>
